print "\e[37;1mEXAMPLE DISAGREE\e[0m\n"
print "================\n"

define MAX_STEPS 100

print "\n"
print "This script should not converge. A limit is set on the number\n"
print "of simulation steps. When this limit is reached, the simulation\n"
print "will be interrupted. The limit is set to $MAX_STEPS steps.\n"
print "\n"

bgp topology load "examples/example-ebgp-3-routers.topo"
bgp topology install

bgp router AS1 add network 0.1/16

bgp router AS2 peer AS3 filter in add-rule
	match any
	action "local-pref 100"

bgp router AS3 peer AS2 filter in add-rule
	match any
	action "local-pref 100"

bgp topology run

sim queue show
print "\n"
print "Running the \"Open Session\" Messages\n"
sim openSessions
sim queue show
print "\n"
print "tracer start\n"
tracer start
tracer graph dump state 0
tracer graph inject state 0
sim queue show
sim runTheXth 1
sim queue show
#tracer graph dump state 0
tracer graph inject state 0
sim queue show
tracer graph dump root


